System.register(["./index-legacy-DtqfUUVi.js"],(function(e,a){"use strict";var t,r,l,s,o,n,d,u,c,v,i,p,f,m,_,h,w,g,b,x,y,C,k,W,M,I,S,A,j,L,T,N,z,F,O;return{setters:[e=>{t=e.d,r=e.D,l=e.b,s=e.c,o=e.w,n=e.e,d=e.a,u=e.T,c=e.h,v=e.z,i=e.U,p=e._,f=e.s,m=e.k,_=e.J,h=e.o,w=e.L,g=e.l,b=e.F,x=e.r,y=e.x,C=e.O,k=e.C,W=e.W,M=e.q,I=e.X,S=e.m,A=e.Y,j=e.Z,L=e.$,T=e.a0,N=e.a1,z=e.a2,F=e.a3,O=e.a4}],execute:function(){var a=document.createElement("style");a.textContent=".content[data-v-3dc2538c]{display:flex;flex-direction:column;justify-content:center;align-items:center}.cards[data-v-f43d60e3]{width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,100px)}.cards__card[data-v-f43d60e3]{display:flex;justify-content:center;align-items:center;transition:transform .3s ease;cursor:pointer}.cards__card[data-v-f43d60e3]:active{transform:scale(.9)}.cards__success[data-v-f43d60e3]{animation:pulse-f43d60e3 .5s ease forwards}.cards__error[data-v-f43d60e3]{animation:shake-f43d60e3 .5s ease forwards}@keyframes pulse-f43d60e3{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes shake-f43d60e3{0%{transform:translate(-10px)}25%{transform:translate(10px)}50%{transform:translate(-10px)}75%{transform:translate(10px)}to{transform:translate(0)}}.cards[data-v-df948bb3]{width:100%;display:flex;flex-direction:column}.cards__card[data-v-df948bb3]{display:flex;justify-content:center;align-items:center;transition:transform .3s ease;cursor:pointer}.cards__card[data-v-df948bb3]:active{transform:scale(.9)}.cards__success[data-v-df948bb3]{animation:pulse-df948bb3 .5s ease forwards}.cards__error[data-v-df948bb3]{animation:shake-df948bb3 .5s ease forwards}@keyframes pulse-df948bb3{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes shake-df948bb3{0%{transform:translate(-10px)}25%{transform:translate(10px)}50%{transform:translate(-10px)}75%{transform:translate(10px)}to{transform:translate(0)}}.wrapper-letter[data-v-978ab0e5]{position:relative}.wrapper-letter .letter[data-v-978ab0e5]{margin:0;transition:transform .3s ease;cursor:pointer}.wrapper-letter .letter[data-v-978ab0e5]:active{transform:scale(.9)}.wrapper-letter .letter__content[data-v-978ab0e5]{padding:6px 10px}.wrapper-letter .letter__content .content[data-v-978ab0e5]{position:relative}.wrapper-letter .badge[data-v-978ab0e5]{position:absolute;z-index:1000;top:-8px;right:-4px}.letter-select[data-v-d2bc6917]{display:flex;flex-direction:column;align-items:center}.letter-select__header[data-v-d2bc6917]{display:flex;flex-direction:row;gap:4px}.letter-select__header .header__text[data-v-d2bc6917]{font-size:20px}.letter-select__header .header__delete[data-v-d2bc6917]{cursor:pointer}.letter-select__card[data-v-d2bc6917]{display:flex;flex-wrap:wrap;align-items:center;padding:40px 0 10px;gap:20px}.letter-select .result[data-v-d2bc6917]{display:flex;flex-direction:column;align-items:center;gap:20px}.letter-select .result__word[data-v-d2bc6917]{font-size:36px}.letter-select .result__translation[data-v-d2bc6917]{font-size:48px;padding:15px 30px;border-radius:50px;background-color:#2dd55b}.bounce-enter-active[data-v-d2bc6917]{animation:bounce-in-d2bc6917 .5s}.bounce-leave-active[data-v-d2bc6917]{animation:bounce-in-d2bc6917 .5s reverse}@keyframes bounce-in-d2bc6917{0%{transform:scale(0)}50%{transform:scale(1.25)}to{transform:scale(1)}}.match[data-v-280546b7]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(4,min-content);gap:6px 10px}.match__word[data-v-280546b7]{grid-column:1/2}.match__translation[data-v-280546b7]{grid-column:2/3}.match__error[data-v-280546b7]{animation:shake-280546b7 .4s ease forwards}@keyframes shake-280546b7{0%{transform:translate(-10px)}25%{transform:translate(10px)}50%{transform:translate(-10px)}75%{transform:translate(10px)}to{transform:translate(0)}}\n",document.head.appendChild(a);const R=p(t({__name:"CardWord",props:{word:{type:String,required:!0}},setup:e=>(a,t)=>{const p=r("ion-text");return l(),s(d(i),{color:"primary"},{default:o((()=>[n(d(u),{class:"content"},{default:o((()=>[n(p,null,{default:o((()=>[c(v(e.word),1)])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-3dc2538c"]]),q={class:"cards"},B=p(t({__name:"WordsCardSelect",setup(e){const a=te(),{cards:t,currentWord:r}=f(a),o=m(),n=_(""),u=_([]),c=_("danger"),v=_("success");h((()=>{i()})),w(r,(e=>o.speakText((null==e?void 0:e.word)||"")));const i=()=>{u.value=t.value.map((()=>"medium")),n.value=""};return(e,o)=>(l(),g("div",q,[(l(!0),g(b,null,x(d(t),((e,o)=>(l(),s(R,{class:y(["cards__card",u.value[o]===c.value?"cards__error":u.value[o]===v.value?"cards__success":""]),color:u.value[o],key:e.word,word:e.translation,onClick:l=>((e,l)=>{if(n.value)return;let s=2e3;n.value=e.word;const o=t.value.findIndex((e=>e.word===r.value.word));u.value[o]=v.value,r.value.word!==e.word&&(s=3e3,u.value[l]=c.value);const d=r.value.word===e.word;a.setAnswer(e,d),setTimeout((()=>{a.setNextWord(),i()}),s)})(e,o)},null,8,["class","color","word","onClick"])))),128))]))}}),[["__scopeId","data-v-f43d60e3"]]),E={class:"cards"},J=p(t({__name:"WordsListSelect",setup(e){const a=te(),{cards:t,currentWord:r}=f(a),o=m(),n=_(""),u=_([]),c=_("danger"),v=_("success");h((()=>{i()}));const i=()=>{u.value=t.value.map((()=>"medium")),n.value=""};return(e,p)=>(l(),g("div",E,[(l(!0),g(b,null,x(d(t),((e,d)=>(l(),s(R,{class:y(["cards__card",u.value[d]===c.value?"cards__error":u.value[d]===v.value?"cards__success":""]),color:u.value[d],key:e.word,word:e.word,onClick:l=>((e,l)=>{var s;if(n.value)return;let d=2e3;n.value=e.word;const p=t.value.findIndex((e=>e.word===r.value.word));u.value[p]=v.value,r.value.word!==e.word&&(d=3e3,u.value[l]=c.value),o.speakText((null===(s=r.value)||void 0===s?void 0:s.word)||"");const f=r.value.word===e.word;a.setAnswer(r.value,f),setTimeout((()=>{a.setNextWord(),i()}),d)})(e,d)},null,8,["class","color","word","onClick"])))),128))]))}}),[["__scopeId","data-v-df948bb3"]]),V={class:"wrapper-letter"},H=p(t({__name:"LetterCard",props:{letter:{type:Object,required:!0},count:{type:Number,required:!1,default:0}},setup:e=>(a,t)=>{const p=r("ion-text"),f=r("ion-badge");return l(),g("div",V,[n(d(i),{color:"medium",class:"letter"},{default:o((()=>[n(d(u),{class:"letter__content content ion-no-padding"},{default:o((()=>[n(p,{class:"content__text"},{default:o((()=>[c(v(e.letter),1)])),_:1})])),_:1})])),_:1}),e.count>1?(l(),s(f,{key:0,class:"badge"},{default:o((()=>[c(v(e.count),1)])),_:1})):C("",!0)])}}),[["__scopeId","data-v-978ab0e5"]]),D={class:"letter-select"},G={key:0,class:"letter-select__header header"},P={key:1,class:"letter-select__card"},U={class:"letter-select__result result"},X=p(t({__name:"WordsLetterSelect",setup(e){const a=te(),{currentWord:t}=f(a),u=m(),i=_([]),p=_([]),y=_(!1),T=_(!1),N=_(!0);h((()=>{F(),O()})),w(t,(()=>{F()})),w(T,(()=>{T.value||F()}));const z=k((()=>{var e;const a=null!==(e=t.value)&&void 0!==e&&e.word?t.value.word.length-p.value.length:0;return p.value.join("")+" _ ".repeat(a)})),F=()=>{var e;const a=null===(e=t.value)||void 0===e?void 0:e.word.split("").sort((()=>Math.random()-.5));i.value=a.reduce(((e,a)=>{const t=e.find((e=>e.letter===a));return t?t.counter+=1:e.push({letter:a,selected:0,counter:1}),e}),[])},O=()=>{p.value=[],y.value=!1,T.value=!1,N.value=!0},R=()=>{a.setNextWord(),O()};return(e,f)=>{const m=r("ion-text"),_=r("ion-button");return l(),g("div",D,[N.value?(l(),g("div",G,[n(m,{class:"header__text"},{default:o((()=>[c(v(z.value),1)])),_:1}),n(d(M),{class:"header__delete",icon:d(W),size:"large",onClick:f[0]||(f[0]=e=>(()=>{if(!p.value.length)return;const e=p.value.pop();e&&i.value.forEach((a=>{a.letter===e&&a.selected--}))})())},null,8,["icon"])])):C("",!0),N.value?(l(),g("div",P,[(l(!0),g(b,null,x(i.value,(e=>(l(),g(b,{key:e.letter},[e.counter!==e.selected?(l(),s(H,{key:0,letter:e.letter,count:e.counter-e.selected,onClick:r=>(e=>{var r;if(p.value.push(e),i.value.forEach((a=>{a.letter===e&&a.selected++})),(null===(r=t.value)||void 0===r?void 0:r.word.length)===p.value.length){var l;const e=p.value.join("");y.value=!0,u.speakText((null===(l=t.value)||void 0===l?void 0:l.word)||""),t.value.word===e?(N.value=!1,a.setAnswer(t.value,!0),setTimeout((()=>{a.setNextWord(),O()}),3e3)):T.value=!0}})(e.letter)},null,8,["letter","count","onClick"])):(l(),s(d(M),{key:1,icon:d(I),size:"small"},null,8,["icon"]))],64)))),128))])):C("",!0),S("div",U,[n(L,{name:"bounce"},{default:o((()=>[A(n(m,{class:"result__translation"},{default:o((()=>{var e;return[c(v(null===(e=d(t))||void 0===e?void 0:e.word),1)]})),_:1},512),[[j,y.value]])])),_:1}),n(L,{name:"slide-fade"},{default:o((()=>[A(n(_,{class:"result__translation",onClick:R},{default:o((()=>[c(" Понял ")])),_:1},512),[[j,T.value]])])),_:1})])])}}}),[["__scopeId","data-v-d2bc6917"]]),Y=t({__name:"WordsMatchCard",props:{word:{type:String,required:!0},color:{type:String,required:!1,default:""}},setup:e=>(a,t)=>{const d=r("ion-card-content"),u=r("ion-card");return l(),s(u,{color:e.color},{default:o((()=>[n(d,null,{default:o((()=>[c(v(e.word),1)])),_:1})])),_:1},8,["color"])}}),Z={class:"match"},$=p(t({__name:"WordsMatchSelect",setup(e){const a=te(),{cards:t}=f(a),r=m(),o=_([]),n=_(""),d=_(null),u=k((()=>t.value.map((e=>e.word)).sort((()=>Math.random()-.5)))),c=k((()=>t.value.map((e=>e.translation)).sort((()=>Math.random()-.5)))),v=k((()=>o.value.at(-1))),i=e=>{var a,r;if(n.value="",1===(null===(a=v.value)||void 0===a?void 0:a.length)&&null!==(r=v.value)&&void 0!==r&&r.includes(e))o.value.pop();else{if(o.value.some((a=>a.includes(e))))return;if(o.value.every((e=>2===e.length)))o.value.push([e]);else{var l;const a=(null===(l=v.value)||void 0===l?void 0:l[0])||"",r=t.value.find((e=>e.word===a)),s=t.value.find((e=>e.translation===a));p(r,s,e)}}w()},p=(e,a,t)=>{d.value&&clearTimeout(d.value);const r=o.value.at(-1);e&&(null==e?void 0:e.translation)===t||a&&(null==a?void 0:a.word)===t?null==r||r.push(t):/[А-Яа-яЁё]/.test((null==r?void 0:r[0])||"")&&/[А-Яа-яЁё]/.test(t)||!/[А-Яа-яЁё]/.test((null==r?void 0:r[0])||"")&&!/[А-Яа-яЁё]/.test(t)?(o.value.pop(),o.value.push([t])):(n.value=t,d.value=setTimeout((()=>n.value=""),3e3))},h=e=>o.value.some((a=>2===a.length&&a.includes(e)))?"success":o.value.some((a=>a.includes(e)))?"primary":n.value===e?"danger":"",w=()=>{var e;4===o.value.length&&2===(null===(e=o.value.at(-1))||void 0===e?void 0:e.length)&&(setTimeout((()=>a.setNextWord()),3e3),a.setAnswer(null,!0))};return(e,a)=>(l(),g("div",Z,[S("div",null,[(l(!0),g(b,null,x(u.value,(e=>(l(),s(Y,{class:y(["match__word",e===n.value?"match__error":""]),key:e,word:e,color:h(e),onClick:a=>(e=>{r.speakText(e),i(e)})(e)},null,8,["class","word","color","onClick"])))),128))]),S("div",null,[(l(!0),g(b,null,x(c.value,(e=>(l(),s(Y,{class:y(["match__translation",e===n.value?"match__error":""]),key:e,word:e,color:h(e),onClick:a=>(e=>{i(e)})(e)},null,8,["class","word","color","onClick"])))),128))])]))}}),[["__scopeId","data-v-280546b7"]]);var K=(e=>(e.Random="Random",e.Card="Card",e.List="List",e.Img="Img",e))(K||{}),Q=e("V",(e=>(e.Card="Card",e.List="List",e.Words="Words",e.Match="Match",e))(Q||{}));const ee={Card:B,List:J,Words:X,Match:$};var ae=e("F",(e=>(e.Random="Random",e.A1="A1",e.A2="A2",e.B1="B1",e.B2="B2",e.C1="C1",e.C2="C2",e.Pronoun="pronoun",e.Number="number",e.Auto="auto",e.Airport="airport",e.Journey="journey",e.Government="government",e.Health="health",e.Business="business",e.Science="science",e.Food="food",e.Culture="culture",e.Fitness="fitness",e.Fashion="fashion",e.Ecology="ecology",e.Socialissues="socialissues",e.Home="home",e))(ae||{}));e("a",["Words","List"]);const te=e("w",T("wordsStore",(()=>{const e=N(),a=_([]),t=_(0),r=_([]),l=_([]),s=_(ae.Random),o=_(!1),n=_([]),d=_(K.Card),u=_(Q.Card),c=k((()=>n.value[t.value])),v=k((()=>ee[u.value])),i=k((()=>Object.values(Q).indexOf(u.value))),p=k((()=>Object.values(Q).length)),f=k((()=>!!l.value.length&&!!n.value&&l.value.length>=n.value.length&&l.value.every((e=>e.isCorrect.length>=n.value.length)))),m=k((()=>6.3*l.value.reduce(((e,a)=>e+a.isCorrect.length),0)/100)),h=k((()=>z.length)),w=(t=3)=>{if(u.value===Q.Match)r.value=n.value;else{const l=JSON.parse(localStorage.getItem(F)||"[]"),s=l.length?a.value.filter((e=>!l.find((a=>e.word===a.word)))):a.value,o=s.length,n=[];for(let e=0;e<t;e++)n.push(Math.floor(Math.random()*o));const d=Math.floor(Math.random()*(r.value.length+1));s.length?r.value=n.map((e=>s[e])):(r.value=n.map((e=>a.value[e])),e.addNotification("Вы уже изучили слова из этой категории. Давайте повторим их!","success")),r.value.splice(d,0,c.value);const u=s.length?s:a.value;O(r.value,u,"word")}},g=()=>{const e=Object.values(Q);i.value<p.value-1?u.value=e[i.value+1]:u.value!==Q.Match||f.value?u.value=e[0]:(o.value=!0,b())},b=()=>{t.value=10;const e=l.value.find((e=>e.isCorrect.length<n.value.length));if(e){u.value=e.studyCard;const a=n.value.filter((a=>-1===e.isCorrect.findIndex((e=>a.word===e.word))));a.length?t.value=n.value.findIndex((e=>e.word===a[0].word)):o.value=!1}else o.value=!1},x=()=>{w()};return{cards:r,currentWord:c,currentFlow:s,activeFlowWords:d,selectedCardViewWord:v,selectedCardView:u,isCompleted:f,progressBarStudyCount:m,flowWords:l,studyWords:n,countAllWords:h,setNextWord:()=>{o.value?b():t.value<3&&u.value!==Q.Match?t.value++:(t.value=0,g()),x()},setRandomCards:w,initializeWordsList:e=>{s.value=e,ae.Random===e?a.value=z:a.value=z.filter((a=>a.levels.includes(e))),((e=4)=>{const t=a.value.length,r=[];for(let a=0;a<e;a++)r.push(Math.floor(Math.random()*t));n.value=r.map((e=>a.value[e]))})(),x()},setAnswer:(e,a)=>{if(e&&u.value!==Q.Match){if(a){const a=l.value.findIndex((e=>e.studyCard===u.value));a>-1?l.value[a].isCorrect.push(e):l.value.push({studyCard:u.value,isCorrect:[e]})}}else l.value.push({studyCard:u.value,isCorrect:n.value})},resetFlow:()=>{t.value=0,l.value=[],o.value=!1,n.value=[],d.value=K.Card,u.value=Q.Card}}})))}}}));
